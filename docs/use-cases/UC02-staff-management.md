# UC02: スタッフ管理

## 概要

管理者がスタッフ（担当者）の情報を登録・編集・削除する。

## アクター

- 管理者（オフィス管理者）

## 事前条件

- 管理者としてログイン済み
- オフィスにサービス区分が登録済み

## 基本フロー

### スタッフ一覧の確認

1. 管理者が `/admin/staffs` にアクセスする
2. 自オフィスのスタッフ一覧が表示される
3. フリーワード検索、ロールフィルタで絞り込める

### スタッフの新規登録

1. 「担当者を追加」ボタンをクリックする
2. フォームに入力する（氏名、メールアドレス、ロール、備考、担当可能サービス区分）
3. 「保存」をクリックする
4. 成功トースト表示、一覧に反映

### スタッフの編集

1. 一覧からスタッフの「編集」ボタンをクリックする
2. フォームに既存データが表示される
3. 内容を変更して「保存」をクリックする
4. 成功トースト表示、一覧に反映

### スタッフの削除

1. 一覧からスタッフの「削除」ボタンをクリックする
2. 確認ダイアログが表示される
3. 「削除」をクリックする
4. 成功トースト表示、一覧から削除

## 代替フロー

### A1: バリデーションエラー

- フォーム送信時にエラーがあれば、フィールド下にエラーメッセージ表示
- 送信は行われない

## 事後条件

- スタッフ情報がデータベースに反映される
- サービス区分権限が `staff_service_type_abilities` に保存される

## ビジネスルール

- `service_type_ids` 省略時は全サービス区分を担当可能として保存
- `note` は最大 500 文字
- 管理者以外はサービス区分権限を変更不可

## 関連

- [スタッフ管理機能](../features/staff-management.md)
- [スタッフ一覧画面](../screens/admin-staffs.md)
